<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Cairo',sans-serif}
body{margin:0;background:#f4f6f8;padding:15px}

.login,.panel{
  max-width:1000px;
  margin:auto;
}

.login{
  background:#fff;
  padding:25px;
  border-radius:18px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}

input,textarea{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-top:8px;
}

button{
  padding:10px 18px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:#1d4350;
  color:#fff;
  margin-top:10px;
}

.order{
  background:#fff;
  border-radius:18px;
  padding:15px;
  margin-bottom:15px;
  box-shadow:0 8px 25px rgba(0,0,0,.1);
}

.order h4{margin:0 0 6px;color:#1d4350}

.delete{background:#c0392b}

@media(max-width:600px){
  body{padding:10px}
}
</style>
</head>
<body>

<div class="login" id="loginBox">
  <h3>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
  <input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <button id="loginBtn" type="button">Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="panel" id="panelBox" style="display:none">
  <h2>ğŸ“‹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
  <p id="report"></p>
  <div id="orders"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const ADMIN_PASS="1979";

loginBtn.onclick=()=>{
  if(pass.value===ADMIN_PASS){
    loginBox.style.display="none";
    panelBox.style.display="block";
    loadOrders();
  }else alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
};

firebase.initializeApp({
  apiKey:"AIzaSyCZ03IL9Rta0QltmoU_CzWkDxMyz_raouI",
  authDomain:"matger-3182c.firebaseapp.com",
  databaseURL:"https://matger-3182c-default-rtdb.firebaseio.com",
  projectId:"matger-3182c"
});
const db=firebase.database();

function loadOrders(){
  db.ref("orders").on("value",snap=>{
    orders.innerHTML="";
    let c=0;
    snap.forEach(s=>{
      c++;
      const o=s.val(),id=s.key;
      orders.innerHTML+=`
      <div class="order">
        <h4>${o.orderNumber}</h4>
        <div>ğŸ‘¤ ${o.name}</div>
        <div>ğŸ“ ${o.phone}</div>
        <div>ğŸ“ ${o.address}</div>
        <div>ğŸ›’ ${o.order}</div>
        <div>â° ${o.date} - ${o.time}</div>
        <textarea placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©" onchange="note('${id}',this.value)">${o.note||""}</textarea>
        <button class="delete" onclick="del('${id}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
      </div>`;
    });
    report.innerText="ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: "+c;
  });
}

function del(id){ if(confirm("Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ØŸ")) db.ref("orders/"+id).remove(); }
function note(id,v){ db.ref("orders/"+id+"/note").set(v); }
</script>
</body>
</html>
