<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</title>

<style>
body{
  font-family:Tahoma;
  background:#f1f3f6;
  padding:20px;
}
.login, .panel{
  max-width:900px;
  margin:auto;
}
.login{
  background:#fff;
  padding:20px;
  border-radius:10px;
  text-align:center;
}
.panel h2{color:#2c5364}
.order{
  background:#fff;
  border-radius:10px;
  padding:15px;
  margin-bottom:15px;
  box-shadow:0 0 10px rgba(0,0,0,.1);
}
.order b{color:#2c5364}
textarea{
  width:100%;
  margin-top:5px;
}
button{
  padding:6px 10px;
  border:none;
  border-radius:5px;
  cursor:pointer;
}
.delete{background:#c0392b;color:#fff}
</style>
</head>
<body>

<div class="login" id="login">
<h3>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
<input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
<br><br>
<button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="panel" id="panel" style="display:none">
<h2>ğŸ“‹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h2>
<p id="report"></p>
<div id="orders"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const ADMIN_PASS="1979";

function login(){
  if(pass.value===ADMIN_PASS){
    loginDiv(false);
    loadOrders();
  }else alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
}
const loginDiv=s=>{login.style.display=s?"block":"none";panel.style.display=s?"none":"block";}

const firebaseConfig = {
  apiKey: "AIzaSyCZ03IL9Rta0QltmoU_CzWkDxMyz_raouI",
  authDomain: "matger-3182c.firebaseapp.com",
  databaseURL: "https://matger-3182c-default-rtdb.firebaseio.com",
  projectId: "matger-3182c",
  storageBucket: "matger-3182c.firebasestorage.app",
  messagingSenderId: "526848781702",
  appId: "1:526848781702:web:17907d973ded7894df5007"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();

function loadOrders(){
  const ordersDiv=document.getElementById("orders");
  db.ref("orders").on("value",snap=>{
    ordersDiv.innerHTML="";
    let c=0;
    snap.forEach(ch=>{
      c++;
      const o=ch.val(),id=ch.key;
      ordersDiv.innerHTML+=`
        <div class="order">
          <b>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</b> ${o.orderNumber}<br>
          <b>Ø§Ù„Ø§Ø³Ù…:</b> ${o.name}<br>
          <b>Ø§Ù„Ù‡Ø§ØªÙ:</b> ${o.phone}<br>
          <b>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</b> ${o.address}<br>
          <b>Ø§Ù„Ø·Ù„Ø¨:</b> ${o.order}<br>
          <b>Ø§Ù„ØªØ§Ø±ÙŠØ®:</b> ${o.date} - ${o.time}<br>
          <textarea placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©" onchange="note('${id}',this.value)">${o.note||""}</textarea>
          <br><br>
          <button class="delete" onclick="del('${id}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
        </div>`;
    });
    report.innerText="ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: "+c;
  });
}

function del(id){ if(confirm("Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ØŸ")) db.ref("orders/"+id).remove(); }
function note(id,v){ db.ref("orders/"+id+"/note").set(v); }
</script>

</body>
</html>
